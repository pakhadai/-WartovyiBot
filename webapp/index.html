<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>Bot Control Panel</title>

    <!-- –®—Ä–∏—Ñ—Ç–∏ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- –Ü–∫–æ–Ω–∫–∏ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lucide@latest/font/lucide.min.css">

    <!-- –°—Ç–∏–ª—ñ (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ CSS –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É) -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Telegram Web App -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- Toast —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è -->
    <div id="toast-notification" class="toast"></div>

    <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <main id="app-container">

        <!-- –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ -->
        <div id="home-page" class="page active">
            <header class="page-header">
                <img src="logo-rm.png" alt="Bot Logo" class="logo">
                <h1 data-translate="welcome_title">–í—ñ—Ç–∞—î–º–æ!</h1>
                <p class="subtitle" data-translate="welcome_subtitle">–¶–µ –≤–∞—à–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞ –ø–∞–Ω–µ–ª—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è –±–æ—Ç–æ–º.</p>
            </header>

            <div class="card">
                <h2 data-translate="features_title">–û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó</h2>
                <ul>
                    <li>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
                        </svg>
                        <span data-translate="feature_captcha">–†–æ–∑—É–º–Ω–∞ CAPTCHA –¥–ª—è –Ω–æ–≤–∏—Ö —É—á–∞—Å–Ω–∏–∫—ñ–≤</span>
                    </li>
                    <li>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="m21 21-4.35-4.35"/>
                        </svg>
                        <span data-translate="feature_spam_filter">–ì–Ω—É—á–∫–∏–π —Å–ø–∞–º-—Ñ—ñ–ª—å—Ç—Ä –∑ —Å–∏—Å—Ç–µ–º–æ—é –±–∞–ª—ñ–≤</span>
                    </li>
                    <li>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="13" r="4"/>
                            <path d="M12 3v6M12 17v4M3 12h6M15 12h6"/>
                        </svg>
                        <span data-translate="feature_punishments">–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–æ–∫–∞—Ä–∞–Ω–Ω—è –¥–ª—è –ø–æ—Ä—É—à–Ω–∏–∫—ñ–≤</span>
                    </li>
                    <li>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                        <span data-translate="feature_individual_settings">–Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏</span>
                    </li>
                </ul>
            </div>
        </div>

        <!-- –°—Ç–æ—Ä—ñ–Ω–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å -->
        <div id="settings-page" class="page">
            <header class="page-header">
                <h1 data-translate="settings_title">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h1>
                <p class="subtitle" data-translate="settings_subtitle">–ö–µ—Ä—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è –æ–±—Ä–∞–Ω–æ–≥–æ —á–∞—Ç—É</p>
            </header>

            <div class="card">
                <h2 data-translate="select_chat_title">–í–∏–±—ñ—Ä –≥—Ä—É–ø–∏/–∫–∞–Ω–∞–ª—É</h2>
                <select id="chat-selector" class="chat-selector">
                    <option value="" data-translate="loading_chats">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</option>
                </select>
            </div>

            <div id="settings-content" class="hidden">
                <section class="card">
                    <h2 data-translate="general_settings_title">–ó–∞–≥–∞–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2>
                    <div id="settings-loader" class="loader" style="display: none;"></div>
                    <div id="settings-container">
                        <div class="setting-item">
                            <label for="captcha-toggle" data-translate="captcha_toggle_label">CAPTCHA –¥–ª—è –Ω–æ–≤–∏—Ö</label>
                            <label class="switch">
                                <input type="checkbox" id="captcha-toggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <label for="spamfilter-toggle" data-translate="spamfilter_toggle_label">–°–ø–∞–º-—Ñ—ñ–ª—å—Ç—Ä</label>
                            <label class="switch">
                                <input type="checkbox" id="spamfilter-toggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <label for="spam-threshold" data-translate="spam_threshold_label">–ü–æ—Ä—ñ–≥ —Å–ø–∞–º—É</label>
                            <input type="number" id="spam-threshold" min="5" max="50" step="5"
                                   style="width: 70px; padding: 8px 12px; border: 1px solid var(--gray-light); border-radius: 8px; font-size: 15px;">
                        </div>
                        <div class="setting-item">
                            <label for="antiflood-toggle" data-translate="antiflood_toggle_label">–ê–Ω—Ç–∏-—Ñ–ª—É–¥ —Å–∏—Å—Ç–µ–º–∞</label>
                            <label class="switch"><input type="checkbox" id="antiflood-toggle"><span class="slider round"></span></label>
                        </div>
                        <div class="setting-item" id="antiflood-sensitivity-container">
                            <label for="antiflood-sensitivity" data-translate="antiflood_sensitivity_label">–ß—É—Ç–ª–∏–≤—ñ—Å—Ç—å —Ñ–ª—É–¥—É</label>
                            <input type="number" id="antiflood-sensitivity" min="3" max="15" step="1" style="width: 60px; padding: 5px; border: 1px solid var(--tg-hint); border-radius: 4px;">
                        </div>
                    </div>
                </section>

                <section class="card">
                    <h2 data-translate="punishments_title">–ì–Ω—É—á–∫—ñ –ø–æ–∫–∞—Ä–∞–Ω–Ω—è</h2>
                    <div id="punishments-container">
                        <div class="punishment-rule">
                            <label data-translate="punishment_level_1">1-—à–µ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è</label>
                            <div class="punishment-controls">
                                <select class="action-selector" data-level="1">
                                    <option value="mute" data-translate="action_mute">–ú—É—Ç</option>
                                    <option value="ban" data-translate="action_ban">–ë–∞–Ω</option>
                                </select>
                                <input type="number" class="duration-input small-input" data-level="1" placeholder="—Ö–≤">
                            </div>
                        </div>
                        <div class="punishment-rule">
                            <label data-translate="punishment_level_2">2-–≥–µ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è</label>
                            <div class="punishment-controls">
                                <select class="action-selector" data-level="2">
                                    <option value="mute" data-translate="action_mute">–ú—É—Ç</option>
                                    <option value="ban" data-translate="action_ban">–ë–∞–Ω</option>
                                </select>
                                <input type="number" class="duration-input small-input" data-level="2" placeholder="—Ö–≤">
                            </div>
                        </div>
                        <div class="punishment-rule">
                            <label data-translate="punishment_level_3">3-—Ç—î –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è</label>
                            <div class="punishment-controls">
                                <select class="action-selector" data-level="3">
                                    <option value="mute" data-translate="action_mute">–ú—É—Ç</option>
                                    <option value="ban" data-translate="action_ban">–ë–∞–Ω</option>
                                </select>
                                <input type="number" class="duration-input small-input" data-level="3" placeholder="—Ö–≤">
                            </div>
                        </div>
                    </div>
                </section>

                <section class="card">
                    <h2 data-translate="spam_words_title">–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Å–ø–∞–º-—Ñ—ñ–ª—å—Ç—Ä–æ–º</h2>
                    <div class="setting-item">
                        <label data-translate="use_global_list_label">–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω—É –±–∞–∑—É</label>
                        <label class="switch">
                            <input type="checkbox" id="use-global-list-toggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label data-translate="use_custom_list_label">–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–æ–∫–∞–ª—å–Ω—É –±–∞–∑—É</label>
                        <label class="switch">
                            <input type="checkbox" id="use-custom-list-toggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <button id="manage-blocklist-btn" data-translate="manage_blocklist_btn" class="manage-list-btn">
                        –ö–µ—Ä—É–≤–∞—Ç–∏ –ß–æ—Ä–Ω–∏–º —Å–ø–∏—Å–∫–æ–º
                    </button>
                    <button id="manage-whitelist-btn" data-translate="manage_whitelist_btn" class="manage-list-btn">
                        –ö–µ—Ä—É–≤–∞—Ç–∏ –ë—ñ–ª–∏–º —Å–ø–∏—Å–∫–æ–º
                    </button>
                </section>
            </div>
        </div>

        <!-- –°—Ç–æ—Ä—ñ–Ω–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div id="stats-page" class="page">
            <header class="page-header">
                <h1 data-translate="stats_title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
                <p class="subtitle" data-translate="stats_subtitle">–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –≤–∞—à–∏—Ö –≥—Ä—É–ø</p>
            </header>

            <div class="card">
                <h2 data-translate="select_chat_for_stats">–í–∏–±–µ—Ä—ñ—Ç—å –≥—Ä—É–ø—É –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</h2>
                <select id="stats-chat-selector" class="chat-selector">
                    <option value="" data-translate="loading_chats">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</option>
                </select>

                <div class="period-selector">
                    <button class="period-btn active" data-days="7">7 –¥–Ω—ñ–≤</button>
                    <button class="period-btn" data-days="30">30 –¥–Ω—ñ–≤</button>
                    <button class="period-btn" data-days="90">90 –¥–Ω—ñ–≤</button>
                </div>
            </div>

            <div id="stats-container" class="hidden">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-value" id="total-messages">0</div>
                        <div class="stat-label">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å</div>
                        <div class="stat-change positive">+0%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üõ°Ô∏è</div>
                        <div class="stat-value" id="spam-blocked">0</div>
                        <div class="stat-label">–ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ —Å–ø–∞–º—É</div>
                        <div class="stat-change negative">0%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-value" id="user-growth">0</div>
                        <div class="stat-label">–ü—Ä–∏—Ä—ñ—Å—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</div>
                        <div class="stat-change positive">+0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-value" id="captcha-success">0%</div>
                        <div class="stat-label">–£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å CAPTCHA</div>
                        <div class="stat-change">0/0</div>
                    </div>
                </div>

                <div class="card chart-card">
                    <h2>üìà –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∑–∞ –ø–µ—Ä—ñ–æ–¥</h2>
                    <canvas id="activity-chart" style="max-height: 250px;"></canvas>
                </div>

                <div class="stats-columns">
                    <div class="card">
                        <h2>‚ö†Ô∏è –¢–æ–ø –ø–æ—Ä—É—à–Ω–∏–∫—ñ–≤</h2>
                        <div id="top-violators" class="violators-list">
                            <div class="loading-placeholder">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
                        </div>
                    </div>
                    <div class="card">
                        <h2>üïê –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–æ –≥–æ–¥–∏–Ω–∞—Ö</h2>
                        <canvas id="hourly-chart"></canvas>
                    </div>
                </div>

                <div class="card export-card">
                    <button class="export-btn button" id="export-stats-btn">
                        üì• –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (CSV)
                    </button>
                </div>
            </div>

            <div id="no-stats-data" class="card hidden">
                <p>üìä –ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è.</p>
            </div>
        </div>

        <!-- –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–µ–º—ñ—É–º -->
        <div id="premium-page" class="page">
            <header class="page-header">
                <h1 data-translate="premium_title">–ü—Ä–µ–º—ñ—É–º</h1>
            </header>
            <div class="card">
                <p data-translate="premium_stub_text">üíé –ù–µ–∑–∞–±–∞—Ä–æ–º —Ç—É—Ç –∑'—è–≤–ª—è—Ç—å—Å—è –ø—Ä–µ–º—ñ—É–º-—Ñ—É–Ω–∫—Ü—ñ—ó.</p>
            </div>
        </div>
    </main>

    <!-- Overlay –¥–ª—è —Å–ø–∏—Å–∫—ñ–≤ —Å–ª—ñ–≤ -->
    <div id="word-list-page" class="page-overlay hidden">
        <button id="back-to-settings-btn" class="fixed-back-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M15 18l-6-6 6-6"/>
            </svg>
        </button>
        <div class="overlay-content">
            <h1 id="word-list-title">–°–ø–∏—Å–æ–∫ —Å–ª—ñ–≤</h1>
            <div class="card" id="blocklist-add-card">
                <h3 data-translate="add_new_word_title">–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–µ —Å–ª–æ–≤–æ</h3>
                <div class="input-row">
                    <input type="text" id="new-blocklist-word" placeholder="–°–ø–∞–º-—Å–ª–æ–≤–æ" class="input-field">
                    <input type="number" id="new-blocklist-score" min="1" max="100" value="10" class="input-score">
                </div>
                <button id="add-blocklist-btn" class="button-primary" data-translate="add_button">–î–æ–¥–∞—Ç–∏</button>
            </div>

            <div class="card" id="whitelist-add-card" style="display: none;">
                <h3 data-translate="add_new_word_title_whitelist">–î–æ–¥–∞—Ç–∏ —Å–ª–æ–≤–æ-–≤–∏–Ω—è—Ç–æ–∫</h3>
                <input type="text" id="new-whitelist-word" placeholder="–°–ª–æ–≤–æ-–≤–∏–Ω—è—Ç–æ–∫" class="input-field" style="margin-bottom: 12px;">
                <button id="add-whitelist-btn" class="button-primary" data-translate="add_button">–î–æ–¥–∞—Ç–∏</button>
            </div>

            <div class="card">
                <h3 data-translate="current_list">–ü–æ—Ç–æ—á–Ω–∏–π —Å–ø–∏—Å–æ–∫</h3>
                <ul id="word-list-ul" class="word-list"></ul>
            </div>
        </div>
    </div>

    <!-- –ù–∏–∂–Ω—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –∑ SVG —ñ–∫–æ–Ω–∫–∞–º–∏ -->
    <nav id="bottom-nav">
        <button class="nav-btn active" data-page="home-page">
            <span class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9 22 9 12 15 12 15 22"/>
                </svg>
            </span>
            <span data-translate="nav_home">–ì–æ–ª–æ–≤–Ω–∞</span>
        </button>

        <button class="nav-btn" data-page="settings-page">
            <span class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>
                    <circle cx="12" cy="12" r="3"/>
                </svg>
            </span>
            <span data-translate="nav_settings">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</span>
        </button>

        <button class="nav-btn" data-page="stats-page">
            <span class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="20" x2="12" y2="10"/>
                    <line x1="18" y1="20" x2="18" y2="4"/>
                    <line x1="6" y1="20" x2="6" y2="16"/>
                </svg>
            </span>
            <span data-translate="nav_stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
        </button>

        <button class="nav-btn" data-page="premium-page">
            <span class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 3h12l4 6-10 13L2 9z"/>
                    <path d="M11 3 8 9l4 13 4-13-5-6"/>
                    <path d="M2 9h20"/>
                </svg>
            </span>
            <span data-translate="nav_premium">–ü—Ä–µ–º—ñ—É–º</span>
        </button>
    </nav>

    <!-- JavaScript -->
    <script src="js/app.js"></script>
</body>
</html>